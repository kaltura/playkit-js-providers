!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ovp=t():(e.playkit=e.playkit||{},e.playkit.providers=e.playkit.providers||{},e.playkit.providers.ovp=t())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=42)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;r(this,e),this.headers=t}return i(e,[{key:"getUrl",value:function(e){return e+"/service/"+this.service+(this.action?"/action/"+this.action:"")}},{key:"doHttpRequest",value:function(){var e=this;if(!this.url)throw new Error("serviceUrl is mandatory for request builder");var t=new XMLHttpRequest;return new Promise(function(n,r){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var e=JSON.parse(t.responseText);e&&"object"===(void 0===e?"undefined":o(e))&&e.code&&e.message?r(e):n(e)}else r(t.responseText)},t.open(e.method,e.url),e.headers.forEach(function(e,n){t.setRequestHeader(n,e)}),t.send(e.params)})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(7),a=(function(e){e&&e.__esModule}(i),n(6)),u=function(){function e(){r(this,e),this.progressive=[],this.dash=[],this.hls=[]}return o(e,[{key:"map",value:function(e,t){if(t)switch(t.name){case a.MediaFormat.MP4.name:this.progressive.push(e);break;case a.MediaFormat.DASH.name:this.dash.push(e);break;case a.MediaFormat.HLS.name:this.hls.push(e)}}},{key:"toJSON",value:function(){var e={progressive:[],dash:[],hls:[]};return this.progressive.forEach(function(t){return e.progressive.push(t.toJSON())}),this.hls.forEach(function(t){return e.hls.push(t.toJSON())}),this.dash.forEach(function(t){return e.dash.push(t.toJSON())}),e}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e?u.get(e):u}function o(e){return r(e).getLevel()}function i(e,t){r(t).setLevel(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setLogLevel=t.getLogLevel=t.LogLevel=void 0;var a=n(24),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s={DEBUG:u.DEBUG,INFO:u.INFO,TIME:u.TIME,WARN:u.WARN,ERROR:u.ERROR,OFF:u.OFF};u.useDefaults({defaultLevel:u.ERROR}),t.default=r,t.LogLevel=s,t.getLogLevel=o,t.setLogLevel=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t,n){r(this,e),this.id="",this.name="",this._session=new s(t,n),this.sources=new a.default,this.duration=0,this.type="Unknown",this.dvr=!1,this.metadata={}}return o(e,[{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"session",get:function(){return this._session}},{key:"sources",get:function(){return this._sources},set:function(e){this._sources=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"dvr",get:function(){return this._dvr},set:function(e){this._dvr=e}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}}]),o(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,session:this.session.toJSON(),sources:this.sources.toJSON(),duration:this.duration,type:this.type,dvr:this.dvr,metadata:this.metadata}}}]),e}();t.default=u;var s=function(){function e(t,n){r(this,e),this._partnerId=t,this._uiConfId=n}return o(e,[{key:"ks",get:function(){return this._ks},set:function(e){this._ks=e}},{key:"partnerId",get:function(){return this._partnerId}},{key:"uiConfId",get:function(){return this._uiConfId}}]),o(e,[{key:"toJSON",value:function(){var e={partnerId:this.partnerId};return this.uiConfId&&(e.uiConfId=this.uiConfId),this.ks&&(e.ks=this.ks),e}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(14),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t){r(this,e),"number"==typeof t?(this.partnerId=t,this.ks=""):"object"===(void 0===t?"undefined":o(t))&&this.fromJSON(t)}return i(e,[{key:"partnerId",get:function(){return this._partnerId},set:function(e){"number"==typeof e&&(this._partnerId=e)}},{key:"ks",get:function(){return this._ks},set:function(e){"string"==typeof e&&(this._ks=e)}},{key:"uiConfId",get:function(){return this._uiConfId},set:function(e){"number"==typeof e&&(this._uiConfId=e)}},{key:"env",get:function(){return this._env},set:function(e){e instanceof u.default?this._env=e:this._env.fromJSON(e)}}]),i(e,[{key:"fromJSON",value:function(e){this.partnerId=e.partnerId,e.ks&&(this.ks=e.ks),e.uiConfId&&(this.uiConfId=e.uiConfId),e.env&&(this.env=new u.default(e.env.serviceUrl,e.env.cdnUrl))}},{key:"toJSON",value:function(){var e={partnerId:this.partnerId,ks:this.ks};return this.uiConfId&&(e.uiConfId=this.uiConfId),this.env&&(e.env=this.env.toJSON()),e}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){r(this,e),this.hasError=!1,"KalturaAPIException"===t.objectType?(this.hasError=!0,this.error=new i(t.code,t.message)):this.data=t};t.default=o;var i=function e(t,n){r(this,e),this.code=t,this.message=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.MediaFormat={DASH:{name:"dash",mimeType:"application/dash+xml",pathExt:"mpd"},HLS:{name:"hls",mimeType:"application/x-mpegURL",pathExt:"m3u8"},WVM:{name:"wvm",mimeType:"video/wvm",pathExt:"wvm"},MP4:{name:"mp4",mimeType:"video/mp4",pathExt:"mp4"},MP3:{name:"mp3",mimeType:"audio/mpeg",pathExt:"mp3"}};t.SupportedStreamFormat=new Map([["mpegdash",r.DASH],["applehttp",r.HLS],["url",r.MP4]])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9),a=(function(e){e&&e.__esModule}(i),function(){function e(){r(this,e)}return o(e,[{key:"toJSON",value:function(){var e={id:this.id,url:this.url,mimetype:this.mimetype};return this.bandwidth&&(e.bandwidth=this.bandwidth),this.width&&(e.width=this.width),this.height&&(e.height=this.height),this.label&&(e.label=this.label),this.drmData&&this.drmData.length>0&&(e.drmData=[],this.drmData.forEach(function(t){Array.isArray(e.drmData)&&e.drmData.push(t.toJSON())})),e}}]),e}());t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OVPConfiguration=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(23),a={serviceUrl:"//www.kaltura.com/api_v3",cdnUrl:"//cdnapisec.kaltura.com",serviceParams:{apiVersion:"3.3.0",format:1}},u=function(){function e(){r(this,e)}return o(e,null,[{key:"set",value:function(e){e&&Object.assign(a,e)}},{key:"get",value:function(){return(0,i.clone)(a)}}]),e}();t.default=u,t.OVPConfiguration=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o){r(this,e),this.licenseUrl=t,this.scheme=n,o&&(this.certificate=o)}return o(e,[{key:"toJSON",value:function(){var e={licenseUrl:this.licenseUrl,scheme:this.scheme};return this.certificate&&(e.certificate=this.certificate),e}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(){r(this,e),this.metadata=new Map,this.sources=new a.default,this.type=e.Type.UNKNOWN}return o(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,sources:this.sources.toJSON(),duration:this.duration,dvrStatus:this.dvrStatus,metadata:this.metadata,type:this.type}}}]),e}();u.Type={VOD:"Vod",LIVE:"Live",IMAGE:"Image",AUDIO:"Audio",UNKNOWN:"Unknown"},t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(12),a=(function(e){e&&e.__esModule}(i),function(){function e(){r(this,e),this._loaders=new Map}return o(e,[{key:"add",value:function(t,n){var r=this,o=new t(n);if(o.isValid()){this._loaders.set(t.id,o);var i=this._multiRequest.requests.length,a=o.requests;a.forEach(function(e){r._multiRequest.add(e)});var u=Array.from(new Array(a.length),function(e,t){return t+i});e._loadersResponseMap.set(t.id,u)}}},{key:"fetchData",value:function(){var e=this;return new Promise(function(t,n){e._multiRequest.execute().then(function(r){if(e._multiResponse=r,r.success){var o=e.prepareData(r);o.success?t(e._loaders):n({success:!1,data:o.error})}else n(r)},function(e){n(e)})})}},{key:"prepareData",value:function(t){return this._loaders.forEach(function(n,r){var o=e._loadersResponseMap.get(r);try{o&&o.length>0&&(n.response=t.results.slice(o[0],o[o.length-1]+1))}catch(e){return{success:!1,error:e}}}),{success:!0,data:this._loaders}}}]),e}());a._loadersResponseMap=new Map,t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MultiRequestResult=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(2),d=r(f),p=n(5),h=r(p),y=function(e){function t(){var e,n,r,o;i(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.requests=[],o=n,a(r,o)}return u(t,e),s(t,[{key:"add",value:function(e){this.requests.push(e);var t={},n={service:e.service,action:e.action};return Object.assign(t,o({},this.requests.length,Object.assign(n,e.params))),Object.assign(t,this.params),this.params=t,this}},{key:"execute",value:function(){var e=this;try{this.params=JSON.stringify(this.params)}catch(e){t._logger.error(""+e.message)}return new Promise(function(t,n){e.doHttpRequest().then(function(e){t(new v(e))},function(e){n("Error on multiRequest execution, error <"+e+">.")})})}}]),t}(l.default);y._logger=(0,d.default)("MultiRequestBuilder"),t.default=y;var v=t.MultiRequestResult=function e(t){var n=this;i(this,e),this.results=[],this.success=!0,(t.result?t.result:t).forEach(function(t){var r=new h.default(t);if(n.results.push(r),r.hasError)return e._logger.error("Service returned an error with error code: "+r.error.code+" and message: "+r.error.message+"."),void(n.success=!1)})};v._logger=(0,d.default)("MultiRequestResult")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){r(this,e),this.scheme=t.scheme,this.licenseURL=t.licenseURL,this.certificate=t.certificate};o.Scheme={"drm.PLAYREADY_CENC":"com.microsoft.playready","drm.WIDEVINE_CENC":"com.widevine.alpha","fairplay.FAIRPLAY":"com.apple.fairplay",WIDEVINE_CENC:"com.widevine.alpha",PLAYREADY_CENC:"com.microsoft.playready",FAIRPLAY:"com.apple.fairplay"},t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){r(this,e),t&&(this.serviceUrl=t),n&&(this.cdnUrl=n)}return o(e,[{key:"serviceUrl",get:function(){return this._serviceUrl},set:function(e){"string"==typeof e&&(this._serviceUrl=e)}},{key:"cdnUrl",get:function(){return this._cdnUrl},set:function(e){"string"==typeof e&&(this._cdnUrl=e)}}]),o(e,[{key:"fromJSON",value:function(e){this.serviceUrl=e.serviceUrl||this.serviceUrl,this.cdnUrl=e.cdnUrl||this.cdnUrl}},{key:"toJSON",value:function(){var e={serviceUrl:this.serviceUrl};return this.cdnUrl&&(e.cdnUrl=this.cdnUrl),e}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this._entryId=t}return o(e,[{key:"ks",get:function(){return this._ks},set:function(e){this._ks=e}},{key:"entryId",get:function(){return this._entryId}}]),o(e,[{key:"toJSON",value:function(){var e={entryId:this.entryId};return this.ks&&(e.ks=this.ks),e}}]),e}();t.default=i},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(12),u=r(a),s=n(8),c=r(s),l=c.default.get(),f=function(){function e(){o(this,e)}return i(e,null,[{key:"getMultiRequest",value:function(e,t,n){var r=l.serviceParams;Object.assign(r,{ks:t,clientTag:"html5:v"+e}),n&&Object.assign(r,{partnerId:n});var o=new Map;o.set("Content-Type","application/json");var i=new u.default(o);return i.method="POST",i.service="multirequest",i.url=i.getUrl(l.serviceUrl),i.params=r,i}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6),u=n(10),s=(r(u),n(1)),c=(r(s),n(7)),l=(r(c),function(){function e(){o(this,e)}return i(e,null,[{key:"getMediaEntry",value:function(){throw new TypeError("getMediaEntry method must be implement by the derived class")}},{key:"_getParsedSources",value:function(){throw new TypeError("_getParsedSources method must be implement by the derived class")}},{key:"_parseAdaptiveSource",value:function(){throw new TypeError("_parseAdaptiveSource method must be implement by the derived class")}},{key:"_isProgressiveSource",value:function(e){var t=a.SupportedStreamFormat.get(e.format);return!!t&&"mp4"===t.name}},{key:"hasBlockActions",value:function(e){if(e&&e.playBackContextResult)for(var t=e.playBackContextResult,n=0;n<t.actions.length;n++)if("BLOCK"===t.actions[n].type)return t.actions[n];return null}},{key:"hasErrorMessage",value:function(e){for(var t=e.playBackContextResult.messages,n=0;n<t.length;n++)if("OK"!==t[n].code)return t[n];return null}}]),e}());t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),u=n(11),s=(r(u),n(4)),c=(r(s),n(3)),l=(r(c),function(){function e(t,n,r){o(this,e),this._partnerId=t.partnerId,this._uiConfId=t.uiConfId,this._isAnonymous=!t.ks,this.ks=t.ks,this._playerVersion=n,r&&this.LogLevel[r]&&(0,a.setLogLevel)(this.LogLevel[r])}return i(e,[{key:"partnerId",get:function(){return this._partnerId}},{key:"uiConfId",get:function(){return this._uiConfId}},{key:"ks",get:function(){return this._ks},set:function(e){this._ks=e}},{key:"playerVersion",get:function(){return this._playerVersion}},{key:"isAnonymous",get:function(){return this._isAnonymous}}]),i(e,[{key:"getMediaConfig",value:function(e){throw new TypeError("getMediaConfig method must be implement by the derived class")}},{key:"_parseDataFromResponse",value:function(e){throw new TypeError("_parseDataFromResponse method must be implement by the derived class")}},{key:"getLogLevel",value:function(e){return(0,a.getLogLevel)(e)}},{key:"setLogLevel",value:function(e,t){(0,a.setLogLevel)(e,t)}},{key:"LogLevel",get:function(){return a.LogLevel}}]),e}());t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){r(this,e),this.message=t.message,this.code=t.code};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){r(this,e),this.type=t.type};o.Type={DRM_POLICY:"drm.DRM_POLICY",BLOCK:1,PREVIEW:2,LIMIT_FLAVORS:3,ADD_TO_STORAGE:4,LIMIT_DELIVERY_PROFILES:5,SERVE_FROM_REMOTE_SERVER:6,REQUEST_HOST_REGEX:7,LIMIT_THUMBNAIL_CAPTURE:8},t.default=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function e(t){var n=void 0;return Array.isArray(t)?(n=t.length>0?t.slice(0):[],n.forEach(function(t,o){("object"===(void 0===t?"undefined":r(t))&&t!=={}||Array.isArray(t)&&t.length>0)&&(n[o]=e(t))})):"object"===(void 0===t?"undefined":r(t))?(n=Object.assign({},t),Object.keys(n).forEach(function(t){("object"===r(n[t])&&n[t]!=={}||Array.isArray(n[t])&&n[t].length>0)&&(n[t]=e(n[t]))})):n=t,n};t.clone=o},function(e,t,n){var r,o;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
!function(i){"use strict";var a={};a.VERSION="1.4.1";var u,s={},c=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},f=function(e,t){return{value:e,name:t}};a.DEBUG=f(1,"DEBUG"),a.INFO=f(2,"INFO"),a.TIME=f(3,"TIME"),a.WARN=f(4,"WARN"),a.ERROR=f(8,"ERROR"),a.OFF=f(99,"OFF");var d=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};d.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,"end"])},invoke:function(e,t){u&&this.enabledFor(e)&&u(t,l({level:e},this.context))}};var p=new d({filterLevel:a.OFF});!function(){var e=a;e.enabledFor=c(p,p.enabledFor),e.debug=c(p,p.debug),e.time=c(p,p.time),e.timeEnd=c(p,p.timeEnd),e.info=c(p,p.info),e.warn=c(p,p.warn),e.error=c(p,p.error),e.log=e.info}(),a.setHandler=function(e){u=e},a.setLevel=function(e){p.setLevel(e);for(var t in s)s.hasOwnProperty(t)&&s[t].setLevel(e)},a.getLevel=function(){return p.getLevel()},a.get=function(e){return s[e]||(s[e]=new d(l({name:e},p.context)))},a.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,o){r=Array.prototype.slice.call(r);var i,u=console.log;o.level===a.TIME?(i=(o.name?"["+o.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(i):t[i]=(new Date).getTime():console.timeEnd?console.timeEnd(i):n(u,[i+": "+((new Date).getTime()-t[i])+"ms"])):(o.level===a.WARN&&console.warn?u=console.warn:o.level===a.ERROR&&console.error?u=console.error:o.level===a.INFO&&console.info?u=console.info:o.level===a.DEBUG&&console.debug&&(u=console.debug),e.formatter(r,o),n(u,r))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},r=a,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}()},,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){r(this,e),this.id=t.id,this.flavorParamsId=t.flavorParamsId,this.fileExt=t.fileExt,this.bitrate=t.bitrate,this.width=t.width,this.height=t.height,this.id=t.id,this.frameRate=t.frameRate,this.isOriginal=t.isOriginal,this.isWeb=t.isWeb,this.containerFormat=t.containerFormat,this.videoCodecId=t.videoCodecId,this.status=t.status,this.language=t.language,this.label=t.label};o.Status={ERROR:-1,QUEUED:0,CONVERTING:1,READY:2,DELETED:3,NOT_APPLICABLE:4,TEMP:5,WAIT_FOR_CONVERT:6,IMPORTING:7,VALIDATING:8,EXPORTING:9},t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){r(this,e),this.id=t.id,this.name=t.name,this.description=t.description,this.dataUrl=t.dataUrl,this.type=t.type,this.entryType=t.mediaType,this.flavorParamsIds=t.flavorParamsIds,this.duration=t.duration,this.poster=t.thumbnailUrl,this.dvrStatus=t.dvrStatus};o.EntryType={AUTOMATIC:{value:-1},EXTERNAL_MEDIA:{value:"externalMedia.externalMedia"},MEDIA_CLIP:{value:1},MIX:{value:2},PLAYLIST:{value:5},DATA:{value:6},LIVE_STREAM:{value:7},LIVE_CHANNEL:{value:8},DOCUMENT:{value:10}},o.MediaType={VIDEO:{value:1},IMAGE:{value:2},AUDIO:{value:5},LIVE_STREAM_FLASH:{value:201},LIVE_STREAM_WINDOWS_MEDIA:{value:202},LIVE_STREAM_REAL_MEDIA:{value:203},LIVE_STREAM_QUICK_TIME:{value:204}},o.EntryStatus={ERROR_IMPORTING:-2,ERROR_CONVERTING:-1,SCAN_FAILURE:"virusScan.ScanFailure",IMPORT:0,INFECTED:"virusScan.Infected",PRECONVERT:1,READY:2,DELETED:3,PENDING:4,MODERATE:5,BLOCKED:6,NO_CONTENT:7},o.EntryModerationStatus={PENDING_MODERATION:1,APPROVED:2,REJECTED:3,FLAGGED_FOR_REVIEW:4,MODERATE:5,AUTO_APPROVED:6},t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(5),s=r(u),c=n(49),l=r(c),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasError||(n.totalCount=e.totalCount,n.totalCount>0&&(n.metas=[],e.objects.map(function(e){return n.metas.push(new l.default(e))}))),n}return a(t,e),t}(s.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(13),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t){var n=this;r(this,e),this.drm=[],this.format=t.format,this.deliveryProfileId=t.deliveryProfileId,this.url=t.url,this.protocols=t.protocols,this.flavorIds=t.flavorIds,t.drm&&t.drm.map(function(e){return n.drm.push(new a.default(e))})}return o(e,[{key:"hasDrmData",value:function(){return this.drm&&this.drm.length>0}},{key:"hasFlavorIds",value:function(){return!!this.flavorIds&&this.flavorIds.length>0}},{key:"getProtocol",value:function(e){var t="";if(this.protocols&&this.protocols.length>0){this.protocols.split(",").forEach(function(n){n===e&&(t=n)})}else if("http"===e)return e;return t}}]),e}();t.default=u},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=r(s),l=n(8),f=r(l),d=n(47),p=r(d),h=n(44),y=r(h),v=n(45),m=r(v),b=n(43),_=r(b),g=n(19),O=r(g),E=n(4),w=(r(E),n(3)),P=r(w),I=n(15),k=(r(I),function(e){function t(e,n,r){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));a._logger=(0,c.default)("OVPProvider");var u=e.toJSON();return f.default.set(u.env),a}return a(t,e),u(t,[{key:"getMediaConfig",value:function(e){var t=this,n=e.toJSON();return n.ks&&(this.ks=n.ks),this._dataLoader=new _.default(this.playerVersion,this.partnerId,this.ks),new Promise(function(e,r){var o=n.entryId;if(o){var i=t.ks;i||(i="{1:result:ks}",t._dataLoader.add(m.default,{partnerId:t.partnerId})),t._dataLoader.add(y.default,{entryId:o,ks:i}),t._dataLoader.fetchData().then(function(n){e(t._parseDataFromResponse(n))},function(e){r(e)})}else r({success:!1,data:"Missing mandatory parameter"})})}},{key:"_parseDataFromResponse",value:function(e){this._logger.debug("Data parsing started");var t=new P.default(this.partnerId,this.uiConfId);if(e){if(e.has(m.default.id)){var n=e.get(m.default.id);n&&n.response&&(this.ks=n.response,t.session.ks=this.ks)}else t.session.ks=this.ks;if(e.has(y.default.id)){var r=e.get(y.default.id);if(r&&r.response){var o=p.default.hasBlockActions(r.response);if(o){var i=p.default.hasErrorMessage(r.response);throw i?(this._logger.error("Entry is blocked, error message: ",i),i):(this._logger.error("Entry is blocked, action: ",o),o)}var a=p.default.getMediaEntry(this.isAnonymous?"":this.ks,this.partnerId,this.uiConfId,r.response);t.id=a.id,t.name=a.name,t.sources=a.sources,t.duration=a.duration,t.type=a.type,t.dvr=!!a.dvrStatus,t.metadata=a.metadata}}}return this._logger.debug("Data parsing finished",t),t}}]),t}(O.default));t.default=k},,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.NAME=t.Provider=t.ProviderMediaInfo=t.ProviderMediaConfig=t.ProviderEnvConfig=t.ProviderOptions=void 0;var o=n(15),i=r(o),a=n(4),u=r(a),s=n(14),c=r(s),l=n(3),f=r(l),d=n(34),p=r(d);t.ProviderOptions=u.default,t.ProviderEnvConfig=c.default,t.ProviderMediaConfig=f.default,t.ProviderMediaInfo=i.default,t.Provider=p.default,t.NAME="playkit-js-providers-ovp",t.VERSION="1.5.0"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(11),s=r(u),c=n(17),l=r(c),f=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._multiRequest=l.default.getMultiRequest(e,r,n),a}return a(t,e),t}(s.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=(r(a),n(51)),s=r(u),c=n(52),l=r(c),f=n(8),d=r(f),p=n(50),h=r(p),y=n(31),v=r(y),m=n(48),b=r(m),_=d.default.get(),g=function(){function e(t){o(this,e),this._response={},this.requests=this.buildRequests(t),this._entryId=t.entryId}return i(e,null,[{key:"id",get:function(){return"media"}}]),i(e,[{key:"buildRequests",value:function(e){var t=[];return t.push(s.default.list(_.serviceUrl,e.ks,e.entryId)),t.push(s.default.getPlaybackContext(_.serviceUrl,e.ks,e.entryId)),t.push(l.default.list(_.serviceUrl,e.ks,e.entryId)),t}},{key:"isValid",value:function(){return!!this._entryId}},{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){var t=new b.default(e[0].data);this._response.entry=t.entries[0],this._response.playBackContextResult=new h.default(e[1].data),this._response.metadataListResult=new v.default(e[2].data)},get:function(){return this._response}}]),e}();t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(53),u=r(a),s=n(8),c=r(s),l=n(0),f=(r(l),c.default.get()),d=function(){function e(t){o(this,e),this._response={},this.requests=this.buildRequests(t),this._partnerId=t.partnerId}return i(e,[{key:"requests",set:function(e){this._requests=e},get:function(){return this._requests}},{key:"response",set:function(e){this._response.ks=e[0].data.ks},get:function(){return this._response.ks}}],[{key:"id",get:function(){return"session"}}]),i(e,[{key:"buildRequests",value:function(e){var t=[];return t.push(u.default.anonymousSession(f.serviceUrl,e.partnerId)),t}},{key:"isValid",value:function(){return!!this._partnerId}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=a.default.get(),s=function(){function e(){r(this,e)}return o(e,null,[{key:"build",value:function(e){var t=u.cdnUrl,n=e.partnerId,r=e.entryId,o=e.ks,i=e.uiConfId,a=e.format,s=e.protocol,c=e.extension,l=e.flavorIds;if(""===t&&""===n&&""===r&&""===c&&""===a)return"";var f=t;return t.endsWith("/")||(f+="/"),f+="p/"+n+"/sp/"+n+"00/playManifest/entryId/"+r+"/protocol/"+s+"/format/"+a,""!==l?f+="/flavorIds/"+l:""!==i&&(f+="/uiConfId/"+i),""!==o&&(f+="/ks/"+o),f+="/a."+c,i&&""!==l&&(f+="?uiConfId="+i),f}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(29),c=(r(s),n(31)),l=(r(c),n(30)),f=r(l),d=n(32),p=(r(d),n(13)),h=r(p),y=n(46),v=r(y),m=n(54),b=r(m),_=n(2),g=r(_),O=n(8),E=r(O),w=n(10),P=r(w),I=n(9),k=r(I),T=n(7),M=r(T),j=n(1),R=r(j),C=n(6),S=n(18),A=r(S),L=E.default.get(),N=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:"getMediaEntry",value:function(e,n,r,o){var i=new P.default,a=o.entry,u=o.playBackContextResult,s=o.metadataListResult,c=u.sources;i.sources=t._getParsedSources(c,e,n,r,a,u),i.metadata=this._parseMetadata(s),i.metadata.description=a.description,i.metadata.poster=a.poster,i.id=a.id,i.name=a.name,i.duration=a.duration;var l=P.default.Type.UNKNOWN;switch(a.entryType){case f.default.MediaType.IMAGE.value:l=P.default.Type.IMAGE;break;case f.default.MediaType.AUDIO.value:l=P.default.Type.AUDIO;break;default:switch(a.type){case f.default.EntryType.MEDIA_CLIP.value:l=P.default.Type.VOD;break;case f.default.EntryType.LIVE_STREAM.value:case f.default.EntryType.LIVE_CHANNEL.value:l=P.default.Type.LIVE,i.dvrStatus=a.dvrStatus;break;default:l=P.default.Type.UNKNOWN}}return i.type=l,i}},{key:"_getParsedSources",value:function(e,n,r,o,i,a){var u=new R.default,s=function(e){var s=t._parseAdaptiveSource(e,a.flavorAssets,n,r,o,i.id),c=C.SupportedStreamFormat.get(e.format);u.map(s,c)};return e&&e.length>0&&(function(){e.filter(function(e){return!t._isProgressiveSource(e)}).forEach(s)}(),function(){var s=e.find(t._isProgressiveSource);u.progressive=t._parseProgressiveSources(s,a.flavorAssets,n,r,o,i.id)}()),u}},{key:"_parseAdaptiveSource",value:function(e,n,r,o,i,a){var u=new M.default;if(e){var s="",c=C.SupportedStreamFormat.get(e.format),l="";if(c&&(l=c.pathExt,u.mimetype=c.mimeType),e.hasFlavorIds()?(!l&&n&&n.length>0&&(l=n[0].fileExt),s=v.default.build({entryId:a,flavorIds:e.flavorIds,format:e.format,ks:r,partnerId:o,uiConfId:i,extension:l,protocol:e.getProtocol(this._getBaseProtocol())})):s=e.url,""===s)return t._logger.error("failed to create play url from source, discarding source: ("+a+"_"+e.deliveryProfileId+"), "+e.format+"."),u;if(u.url=s,u.id=a+"_"+e.deliveryProfileId+","+e.format,e.hasDrmData()){var f=[];e.drm.forEach(function(e){f.push(new k.default(e.licenseURL,h.default.Scheme[e.scheme],e.certificate))}),u.drmData=f}}return u}},{key:"_parseProgressiveSources",value:function(e,t,n,r,o,i){var a=[];if(e){var u=e.getProtocol(this._getBaseProtocol()),s=e.format,c=e.deliveryProfileId+","+e.format;t.map(function(e){if(e.height&&e.width){var t=new M.default;t.id=e.id+c,t.mimetype="video/mp4",t.height=e.height,t.width=e.width,t.bandwidth=1024*e.bitrate,t.label=e.label||e.language,t.url=v.default.build({entryId:i,flavorIds:e.id,format:s,ks:n,partnerId:r,uiConfId:o,extension:"mp4",protocol:u}),a.push(t)}})}return a}},{key:"_parseMetadata",value:function(e){var t={};return e&&e.metas&&e.metas.length>0&&e.metas.forEach(function(e){var n=void 0,r=new DOMParser;e.xml=e.xml.replace(/\r?\n|\r/g,""),e.xml=e.xml.replace(/>\s*/g,">"),e.xml=e.xml.replace(/>\s*/g,">"),n=r.parseFromString(e.xml,"text/xml");var o=b.default.xmlToJson(n);Object.keys(o.metadata).forEach(function(e){t[e]=o.metadata[e]["#text"]})}),t}},{key:"_getBaseProtocol",value:function(){var e=/^https?:/,t=e.exec(L.cdnUrl),n=t?t[0]:document.location.protocol;return"string"==typeof n?n.slice(0,-1):"https"}}]),t}(A.default);N._logger=(0,g.default)("OVPProviderParser"),t.default=N},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(5),s=r(u),c=n(30),l=r(c),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasError||(n.totalCount=e.totalCount,n.totalCount>0&&(n.entries=[],e.objects.map(function(e){return n.entries.push(new l.default(e))}))),n}return a(t,e),t}(s.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){r(this,e),this.id=t.id,this.metadataProfileId=t.metadataProfileId,this.metadataProfileVersion=t.metadataProfileVersion,this.metadataProfileId=t.metadataProfileId,this.metadataObjectType=t.metadataObjectType,this.objectId=t.objectId,this.version=t.version,this.created=new Date(0),this.created.setUTCSeconds(t.createdAt),this.updated=new Date(0),this.updated.setUTCSeconds(t.updatedAt),this.status=t.status,this.xml=t.xml};o.ObjectType={AD_CUE_POINT:"adCuePointMetadata.AdCuePoint",ANNOTATION:"annotationMetadata.Annotation",CODE_CUE_POINT:"codeCuePointMetadata.CodeCuePoint",THUMB_CUE_POINT:"thumbCuePointMetadata.thumbCuePoint",ENTRY:1,CATEGORY:2,USER:3,PARTNER:4,DYNAMIC_OBJECT:5},o.Status={VALID:1,INVALID:2,DELETED:3},t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(5),s=r(u),c=n(20),l=r(c),f=n(32),d=r(f),p=n(21),h=r(p),y=n(29),v=r(y),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.sources=[],n.actions=[],n.messages=[],n.flavorAssets=[],!n.hasError){var r=e.messages;r&&r.map(function(e){return n.messages.push(new l.default(e))});var a=e.actions;a&&a.map(function(e){return n.actions.push(new h.default(e))});var u=e.sources;u&&u.map(function(e){return n.sources.push(new d.default(e))});var s=e.flavorAssets;s&&s.map(function(e){return n.flavorAssets.push(new v.default(e))})}return n}return a(t,e),t}(s.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(17),c=r(s),l=n(0),f=r(l),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:"getPlaybackContext",value:function(e,t,n){var r=new Map;r.set("Content-Type","application/json");var o=new f.default(r);o.service="baseEntry",o.action="getPlaybackContext",o.method="POST",o.url=o.getUrl(e),o.tag="baseEntry-getPlaybackContext";var i={objectType:"KalturaContextDataParams",flavorTags:"all"};return o.params={entryId:n,ks:t,contextDataParams:i},o}},{key:"list",value:function(e,n,r){var o=new Map;o.set("Content-Type","application/json");var i=new f.default(o);return i.service="baseEntry",i.action="list",i.method="POST",i.url=i.getUrl(e),i.tag="list",i.params=t.getEntryListReqParams(r,n),i}},{key:"getEntryListReqParams",value:function(e,t){return{ks:t,filter:{redirectFromEntryId:e},responseProfile:{fields:"id,name,description,thumbnailUrl,dataUrl,duration,msDuration,flavorParamsIds,mediaType,type,tags,dvrStatus",type:1}}}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(17),c=r(s),l=n(0),f=r(l),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:"list",value:function(e,t,n){var r=new Map;r.set("Content-Type","application/json");var o=new f.default(r);o.service="metadata_metadata",o.action="list",o.method="POST",o.url=o.getUrl(e),o.tag="metadata_metadata-list";var i={objectType:"KalturaMetadataFilter",objectIdEqual:n,metadataObjectTypeEqual:"1"};return o.params={filter:i,ks:t},o}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(17),c=r(s),l=n(0),f=r(l),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:"anonymousSession",value:function(e,t){var n=new Map;n.set("Content-Type","application/json");var r=new f.default(n);return r.service="session",r.action="startWidgetSession",r.method="POST",r.url=r.getUrl(e),r.tag="session-startWidget",r.params={widgetId:"_"+t},r}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"xmlToJson",value:function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++){var i=e.childNodes.item(o),a=i.nodeName;if(void 0===t[a])t[a]=this.xmlToJson(i);else{if(void 0===t[a].push){var u=t[a];t[a]=[],t[a].push(u)}t[a].push(this.xmlToJson(i))}}return t}}]),e}();t.default=i}])});
//# sourceMappingURL=playkit-ovp-provider.js.map